<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="flags.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script type="text/javascript">
function googleTranslateElementInit() {
	new google.translate.TranslateElement({pageLanguage: 'ko',autoDisplay: true}, 'google_translate_element');}
			
$(document).ready(function(){

	document.querySelector('.translation-links').addEventListener('click',function(event) {
		let el = event.target;
		if(el != null){
			console.log("el =",el);
			while(el.nodeName == 'FONT' || el.nodeName == 'SPAN'){
				el = el.parentElement;
			}
			console.log("el.dataset =",el.dataset);
			const gtcombo = document.querySelector('.goog-te-combo');
			if (gtcombo == null) {
				alert("Error: Could not find Google translate Combolist.");
				return false;
			}
			console.log("el.dataset.lang =",el.dataset.lang);
			gtcombo.value = el.dataset.lang;
			gtcombo.dispatchEvent(new Event('change')); 
			
			closeclick();
		}
		return false;
	});
	var closeclick = function() {
		setTimeout(function(){
			var ul = null;
			console.log("ul =",document.querySelector('.skiptranslate'));
			ul = document.querySelector('.skiptranslate');
			if(ul == null) 
				closeclick();
			 else {
				ul.style.display = "none";
				document.body.style.top = "0px";
			}
		},1000);
	}
});
</script>
</head>
<body>
    <div id="google_translate_element" style="display:none;"></div>
	<ul class="translation-links">
		<li><a href="javascript:void(0)" class="korean" data-lang="ko" title="korean"><span class="flag ko"></span></a></li>
		<li><a href="javascript:void(0)" class="english" data-lang="en" title="English"><span class="flag en"></span></a></li>
	 </ul>
	<p>번역 테스트 입니다.</p>
</body>
</html>